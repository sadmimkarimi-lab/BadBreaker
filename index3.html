<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ø¨Ø§Ø²ÛŒ Ø¨Ø¯Ø´Ú©Ù† Ø·Ø§ÙˆÛŒØªØ§</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- ÙÙˆÙ†Øª ÙˆØ²ÛŒØ±Ù…ØªÙ† -->
  <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn/Vazirmatn-font-face.css" rel="stylesheet" />

  <style>
    :root {
      --bg-dark: #020617;
      --bg-dark-soft: #020617;
      --bg-dark-elevated: #020617;
      --bg-panel: #020617;
      --bg-card: #020617;
      --border-soft: #1f2937;
      --accent: #f97316;
      --accent-soft: rgba(249, 115, 22, 0.1);
      --accent-strong: #fb923c;
      --text-main: #f9fafb;
      --text-muted: #9ca3af;
      --text-soft: #6b7280;
      --danger: #f97373;
      --success: #22c55e;
      --radius-xl: 22px;
      --radius-lg: 18px;
      --radius-md: 12px;
      --shadow-soft: 0 18px 40px rgba(15, 23, 42, 0.75);
      --shadow-card: 0 14px 30px rgba(15, 23, 42, 0.85);
    }

    body.light {
      --bg-dark: #f9fafb;
      --bg-dark-soft: #e5e7eb;
      --bg-dark-elevated: #e5e7eb;
      --bg-panel: #ffffff;
      --bg-card: #ffffff;
      --border-soft: #e5e7eb;
      --text-main: #020617;
      --text-muted: #4b5563;
      --text-soft: #6b7280;
      --shadow-soft: 0 18px 40px rgba(148, 163, 184, 0.55);
      --shadow-card: 0 14px 30px rgba(148, 163, 184, 0.65);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      height: 100%;
    }

    body {
      font-family: Vazirmatn, system-ui, sans-serif;
      background: radial-gradient(circle at top, #020617 0, #020617 45%, #020617 100%);
      color: var(--text-main);
      display: flex;
      justify-content: center;
    }

    .app {
      width: 100%;
      max-width: 960px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      background: var(--bg-dark);
    }

    /* ===== HEADER ===== */

    .app-header {
      padding: 12px 16px 10px;
      border-bottom: 1px solid var(--border-soft);
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.98), rgba(17, 24, 39, 0.98));
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .header-top-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .header-left,
    .header-right {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .brand-block {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .logo-wrap {
      width: 46px;
      height: 46px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #f97316 0, #111827 48%, #000 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 12px 26px rgba(0, 0, 0, 0.8);
      overflow: hidden;
      border: 1px solid rgba(248, 250, 252, 0.08);
      flex-shrink: 0;
    }

    .logo-wrap img {
      width: 70%;
      height: 70%;
      object-fit: contain;
      filter: drop-shadow(0 0 10px rgba(248, 250, 252, 0.9));
    }

    .brand-texts {
      display: flex;
      flex-direction: column;
      gap: 1px;
    }

    .brand-title {
      font-size: 18px;
      font-weight: 800;
      letter-spacing: -0.04em;
      color: #fefce8;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .brand-title span.badge {
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 999px;
      border: 1px solid rgba(250, 204, 21, 0.4);
      background: radial-gradient(circle at 30% 0, rgba(250, 204, 21, 0.35), transparent 60%);
      color: #fbbf24;
    }

    .brand-subtitle {
      font-size: 11px;
      color: var(--text-soft);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .online-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 0 5px rgba(34, 197, 94, 0.35);
      animation: pulse 1.6s infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.25); opacity: 0.7; }
    }

    /* Stats (left side) */

    .stats-row {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 12px;
    }

    .stat-pill {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(51, 65, 85, 0.85);
      color: var(--text-muted);
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.8);
    }

    .stat-pill span.value {
      font-weight: 700;
      color: var(--accent-strong);
    }

    .stat-pill.heart span.value {
      color: #f97373;
    }

    .stat-pill.level span.value {
      color: #38bdf8;
    }

    /* Controls (icons only) */

    .controls-row {
      display: flex;
      align-items: center;
      gap: 6px;
      justify-content: flex-end;
      flex-wrap: wrap;
    }

    .icon-btn {
      width: 30px;
      height: 30px;
      border-radius: 999px;
      border: 1px solid rgba(51, 65, 85, 0.9);
      background: radial-gradient(circle at 30% 0, rgba(148, 163, 184, 0.4), rgba(15, 23, 42, 0.95));
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 15px;
      color: #e5e7eb;
      cursor: pointer;
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.8);
      transition: transform 0.08s ease-out, box-shadow 0.1s ease-out, border-color 0.1s ease-out, background 0.1s ease-out;
    }

    .icon-btn:active {
      transform: translateY(1px) scale(0.97);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.8);
    }

    .icon-btn.primary {
      border-color: rgba(249, 115, 22, 0.9);
      background: radial-gradient(circle at 30% 0, rgba(249, 115, 22, 0.65), rgba(21, 24, 33, 0.98));
      color: #fefce8;
    }

    .icon-btn.secondary {
      font-size: 14px;
    }

    .icon-btn.toggled {
      border-color: #22c55e;
      background: radial-gradient(circle at 0 0, rgba(34, 197, 94, 0.6), rgba(15, 23, 42, 0.95));
    }

    .icon-btn.muted {
      border-color: #f97373;
      background: radial-gradient(circle at 0 0, rgba(239, 68, 68, 0.7), rgba(15, 23, 42, 0.98));
    }

    .icon-btn.day {
      border-color: #facc15;
      background: radial-gradient(circle at 0 0, rgba(250, 204, 21, 0.8), #f97316);
      color: #111827;
    }

    /* Daily practice bar */

    .header-bottom-row {
      margin-top: 4px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .daily-wrapper {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 11px;
      color: var(--text-muted);
    }

    .daily-title {
      color: var(--text-soft);
    }

    .daily-dots {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .daily-dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: radial-gradient(circle at 30% 0, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 1));
      box-shadow: 0 3px 8px rgba(15, 23, 42, 0.9);
    }

    .daily-dot.active {
      border-color: rgba(249, 115, 22, 0.9);
      background: radial-gradient(circle at 30% 0, rgba(249, 115, 22, 0.9), rgba(15, 23, 42, 0.98));
      box-shadow: 0 0 14px rgba(249, 115, 22, 0.8);
    }

    .header-note {
      font-size: 10px;
      color: var(--text-soft);
      text-align: left;
    }

    /* ===== MAIN LAYOUT ===== */

    .main {
      flex: 1;
      padding: 14px 12px 12px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      background: radial-gradient(circle at top, #020617 0, #020617 45%, #020617 100%);
    }

    .top-panel-row {
      display: flex;
      gap: 10px;
      align-items: stretch;
      flex-wrap: wrap;
    }

    .game-panel {
      flex: 1.4;
      min-width: 250px;
      background: radial-gradient(circle at top left, rgba(15, 23, 42, 0.95), rgba(3, 7, 18, 1));
      border-radius: var(--radius-xl);
      border: 1px solid rgba(30, 64, 175, 0.85);
      box-shadow: var(--shadow-card);
      padding: 12px 12px 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      position: relative;
      overflow: hidden;
    }

    .side-panel {
      flex: 0.9;
      min-width: 210px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .panel-title-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
      font-size: 12px;
      color: var(--text-muted);
      margin-bottom: 2px;
    }

    .level-progress {
      flex: 1;
      height: 5px;
      border-radius: 999px;
      background: rgba(31, 41, 55, 0.8);
      overflow: hidden;
      box-shadow: 0 3px 10px rgba(15, 23, 42, 0.8);
    }

    .level-progress-inner {
      width: 0%;
      height: 100%;
      background: linear-gradient(90deg, #22c55e, #f97316, #facc15);
      transition: width 0.25s ease-out;
    }

    .board-wrapper {
      flex: 1;
      background: radial-gradient(circle at top, #020617 0, #020617 50%, #020617 100%);
      border-radius: 18px;
      border: 1px solid rgba(30, 64, 175, 0.6);
      padding: 10px;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      position: relative;
    }

    #gameCanvas {
      width: 100%;
      max-width: 480px;
      aspect-ratio: 3 / 4;
      border-radius: 14px;
      background: radial-gradient(circle at top, #020617 0, #000 52%, #020617 100%);
      border: 1px solid rgba(51, 65, 85, 0.85);
      box-shadow:
        inset 0 0 40px rgba(15, 23, 42, 0.9),
        0 18px 40px rgba(0, 0, 0, 0.95);
    }

    /* Message card */

    .message-card {
      margin-top: 4px;
      border-radius: var(--radius-lg);
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: radial-gradient(circle at 0 0, rgba(15, 23, 42, 0.95), rgba(3, 7, 18, 0.98));
      padding: 8px 10px;
      display: flex;
      align-items: flex-start;
      gap: 8px;
      box-shadow: 0 10px 28px rgba(0, 0, 0, 0.9);
      font-size: 11px;
      color: var(--text-main);
      position: relative;
      overflow: hidden;
    }

    .message-icon {
      width: 24px;
      height: 24px;
      border-radius: 999px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      background: radial-gradient(circle at 30% 0, rgba(249, 115, 22, 0.8), rgba(30, 64, 175, 0.95));
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.9);
      flex-shrink: 0;
    }

    .message-text {
      flex: 1;
      line-height: 1.9;
    }

    .message-text b {
      color: var(--accent-strong);
    }

    .message-tag {
      font-size: 10px;
      color: var(--text-soft);
      margin-top: 2px;
    }

    /* Side cards */

    .side-card {
      background: radial-gradient(circle at top left, rgba(15, 23, 42, 0.95), rgba(15, 23, 42, 0.98));
      border-radius: var(--radius-lg);
      border: 1px solid rgba(55, 65, 81, 0.95);
      padding: 10px 10px 9px;
      box-shadow: 0 12px 28px rgba(0, 0, 0, 0.95);
      font-size: 11px;
      color: var(--text-main);
    }

    .side-card h3 {
      font-size: 12px;
      margin-bottom: 6px;
      color: var(--accent-strong);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .side-card h3 span.icon {
      font-size: 13px;
    }

    .side-list {
      display: flex;
      flex-direction: column;
      gap: 4px;
      color: var(--text-soft);
    }

    .side-list li {
      list-style: none;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .side-badge {
      min-width: 18px;
      height: 18px;
      border-radius: 999px;
      border: 1px solid rgba(75, 85, 99, 0.95);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      color: var(--text-muted);
    }

    /* Bottom row */

    .bottom-row {
      margin-top: 8px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      font-size: 10px;
      color: var(--text-soft);
      border-top: 1px solid var(--border-soft);
      padding: 6px 2px 2px;
    }

    .bottom-left {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .bottom-right {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .link-btn {
      font-size: 11px;
      color: var(--accent-strong);
      text-decoration: none;
      border-radius: 999px;
      border: 1px dashed rgba(249, 115, 22, 0.8);
      padding: 3px 8px;
      background: radial-gradient(circle at 0 0, rgba(249, 115, 22, 0.15), transparent 60%);
    }

    .link-btn:hover {
      border-style: solid;
    }

    /* Helpers */

    .hidden {
      display: none !important;
    }

    /* Responsive */

    @media (max-width: 720px) {
      .app-header {
        padding-inline: 10px;
      }

      .header-top-row {
        flex-direction: column;
        align-items: stretch;
      }

      .header-left {
        justify-content: space-between;
      }

      .brand-title {
        font-size: 17px;
      }

      .main {
        padding-inline: 10px;
      }
    }

    @media (max-width: 520px) {
      .top-panel-row {
        flex-direction: column;
      }

      #gameCanvas {
        max-width: 100%;
        aspect-ratio: 3 / 4;
      }
    }
  </style>
</head>
<body class="dark">
  <div class="app">
    <!-- ===== HEADER ===== -->
    <header class="app-header">
      <div class="header-top-row">
        <!-- Right: Logo + title -->
        <div class="header-left">
          <div class="brand-block">
            <div class="logo-wrap">
              <!-- Ù„ÙˆÚ¯ÙˆÛŒ Ø®ÙˆØ¯Øª Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ú¯Ø°Ø§Ø± -->
              <img src="https://cdnfa.com/irangiah/a9be/uploads/newtavi/picsart-25-11-14-07-34-00-477.png"
                   alt="Ø¨Ø¯Ø´Ú©Ù† Ø·Ø§ÙˆÛŒØªØ§" />
            </div>
            <div class="brand-texts">
              <div class="brand-title">
                Ø¨Ø¯Ø´Ú©Ù†
                <span class="badge">Ø¨Ø§Ø²ÛŒ ØªÙ…Ø±Ú©Ø² Ùˆ Ø¢Ø±Ø§Ù…Ø´</span>
              </div>
              <div class="brand-subtitle">
                <span class="online-dot"></span>
                <span>Ø¢Ø¬Ø±Ù‡Ø§ Ø±Ùˆ Ø¨Ø§ ØªÙ…Ø±Ú©Ø² Ø¨Ø´Ú©Ù† Ùˆ Ø±Ú©ÙˆØ±Ø¯ Ø®ÙˆØ¯Øª Ø±Ùˆ Ø¨Ø²Ù†</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Left: stats + controls -->
        <div class="header-right">
          <!-- Stats -->
          <div class="stats-row">
            <div class="stat-pill heart">
              <span>â¤ï¸ Ø¬Ø§Ù†:</span>
              <span id="livesValue" class="value">3</span>
            </div>
            <div class="stat-pill score">
              <span>â­ Ø§Ù…ØªÛŒØ§Ø²:</span>
              <span id="scoreValue" class="value">0</span>
            </div>
            <div class="stat-pill level">
              <span>ğŸ® Ù…Ø±Ø­Ù„Ù‡:</span>
              <span id="levelValue" class="value">1</span>
            </div>
          </div>

          <!-- Controls -->
          <div class="controls-row">
            <!-- Start -->
            <button id="btnStart" class="icon-btn primary" type="button" title="Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ">
              â–¶ï¸
            </button>
            <!-- Stop / pause -->
            <button id="btnPause" class="icon-btn secondary" type="button" title="ØªÙˆÙ‚Ù / Ø§Ø¯Ø§Ù…Ù‡">
              â¸ï¸
            </button>
            <!-- Sound on/off -->
            <button id="btnSound" class="icon-btn secondary" type="button" title="ØµØ¯Ø§">
              ğŸ”Š
            </button>
            <!-- Theme (night / day) -->
            <button id="btnTheme" class="icon-btn secondary" type="button" title="ØªÙ… Ø´Ø¨ / Ø±ÙˆØ²">
              ğŸŒ™
            </button>
            <!-- Help -->
            <button id="btnHelp" class="icon-btn secondary" type="button" title="Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø¨Ø§Ø²ÛŒ">
              â“
            </button>
            <!-- Profile -->
            <button id="btnProfile" class="icon-btn secondary" type="button" title="Ù¾Ø±ÙˆÙØ§ÛŒÙ„ / Ø±Ú©ÙˆØ±Ø¯">
              ğŸ‘¤
            </button>
          </div>
        </div>
      </div>

      <!-- Daily practice row -->
      <div class="header-bottom-row">
        <div class="daily-wrapper">
          <span class="daily-title">ØªÙ…Ø±ÛŒÙ† Ø±ÙˆØ²Ø§Ù†Ù‡:</span>
          <div class="daily-dots">
            <span class="daily-dot active"></span>
            <span class="daily-dot"></span>
            <span class="daily-dot"></span>
            <span class="daily-dot"></span>
            <span class="daily-dot"></span>
            <span class="daily-dot"></span>
          </div>
        </div>
        <div class="header-note">
          Ù‡Ø± Ø±ÙˆØ² Ú†Ù†Ø¯ Ø¯Ù‚ÛŒÙ‚Ù‡ Ø¨Ø§ Ø¨Ø¯Ø´Ú©Ù† Ø¨Ø§Ø²ÛŒ Ú©Ù† ØªØ§ ØªÙ…Ø±Ú©Ø² Ùˆ Ø¢Ø±Ø§Ù…Ø´Øª Ø¨ÛŒØ´ØªØ± Ø¨Ø´Ù‡ ğŸŒ™
        </div>
      </div>
    </header>

    <!-- ===== MAIN ===== -->
    <main class="main">
      <div class="top-panel-row">
        <!-- Game panel -->
        <section class="game-panel">
          <div class="panel-title-row">
            <span>Ù…Ø³ÛŒØ± ÙØ¹Ù„ÛŒ:</span>
            <div class="level-progress">
              <div id="levelProgressInner" class="level-progress-inner"></div>
            </div>
          </div>

          <div class="board-wrapper">
            <canvas id="gameCanvas" width="360" height="480"></canvas>
          </div>

          <!-- Message card -->
          <div id="messageCard" class="message-card">
            <div class="message-icon" id="messageIcon">ğŸ§ </div>
            <div class="message-text">
              <div id="messageMain">
                Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ØŒ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡Ù” â–¶ï¸ Ø¨Ø²Ù†.  
                Ø¯Ø± Ù…Ø±Ø§Ø­Ù„ Û± ØªØ§ Û±Û° Ø¢Ø¬Ø±Ù‡Ø§ Ø¯Ø±Ø´Øªâ€ŒØªØ±Ù† Ùˆ Ú©Ù…â€ŒÚ©Ù… Ø±ÛŒØ²ØªØ± Ù…ÛŒâ€ŒØ´Ù†.
              </div>
              <div class="message-tag" id="messageTag">
                Ù‡Ø± Ù…Ø±Ø­Ù„Ù‡ Ú©Ù‡ Ø±Ø¯ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØŒ <b>Û² Ø¬Ø§Ù†</b> Ø¨Ù‡Øª Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´Ù‡Ø› ÙÙ‚Ø· Ø¢Ø¬Ø±Ù‡Ø§ Ù‡Ù… Ø´Ù„ÙˆØºâ€ŒØªØ± Ùˆ Ø±ÛŒØ²ØªØ± Ù…ÛŒâ€ŒØ´Ù† ğŸ˜‰
              </div>
            </div>
          </div>
        </section>

        <!-- Side panel -->
        <aside class="side-panel">
          <div class="side-card">
            <h3><span class="icon">ğŸ¯</span>Ù†Ø­ÙˆÙ‡Ù” Ø³Ø®Øª Ø´Ø¯Ù† Ù…Ø±Ø§Ø­Ù„</h3>
            <ul class="side-list">
              <li>
                <span class="side-badge">Û±â€“Û±Û°</span>
                <span>Ø³Ø§ÛŒØ² Ø¢Ø¬Ø±Ù‡Ø§ Ø§Ø² <b>Û³</b> Ø´Ø±ÙˆØ¹ Ù…ÛŒâ€ŒØ´Ù‡ Ùˆ ØªØ§ <b>Û±</b> Ú©Ù… Ù…ÛŒâ€ŒØ´Ù‡.</span>
              </li>
              <li>
                <span class="side-badge">Û±Û±â€“Û²Û°</span>
                <span>Ø³Ø§ÛŒØ² Ø¢Ø¬Ø±Ù‡Ø§ Ø§Ø² <b>Û²</b> Ø´Ø±ÙˆØ¹ Ù…ÛŒâ€ŒØ´Ù‡ Ùˆ ØªØ§ <b>Û±</b> Ú©Ù… Ù…ÛŒâ€ŒØ´Ù‡.</span>
              </li>
              <li>
                <span class="side-badge">Û²Û±â€“Û³Û°</span>
                <span>Ø³Ø§ÛŒØ² Ø¢Ø¬Ø±Ù‡Ø§ Ø§Ø² Ø­Ø¯ÙˆØ¯ <b>Û±Ù«Ûµ</b> Ø´Ø±ÙˆØ¹ Ù…ÛŒâ€ŒØ´Ù‡ Ùˆ Ø¨Ù‡ <b>Û±</b> Ù…ÛŒâ€ŒØ±Ø³Ù‡.</span>
              </li>
              <li>
                <span class="side-badge">+</span>
                <span>Ù‡Ø± Ù…Ø±Ø­Ù„Ù‡ Ú©Ù‡ Ø±Ø¯ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØŒ <b>Û² Ø¬Ø§Ù†</b> Ø¬Ø§ÛŒØ²Ù‡ Ù…ÛŒâ€ŒÚ¯ÛŒØ±ÛŒ ğŸ’œ</span>
              </li>
            </ul>
          </div>

          <div class="side-card">
            <h3><span class="icon">ğŸ§˜â€â™€ï¸</span>Ø­Ø§Ù„Øª Ø¢Ø±Ø§Ù…Ø´ / Ù…Ø¹Ù…ÙˆÙ„ÛŒ</h3>
            <ul class="side-list">
              <li>
                <span class="side-badge">Ø¢Ø±Ø§Ù…</span>
                <span>Ø³Ø±Ø¹Øª ØªÙˆÙ¾ Ú©Ù…ØªØ±ØŒ Ø¨Ø±Ø§ÛŒ ÙˆÙ‚Øªâ€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ ÙÙ‚Ø· Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ Ø¢Ø±ÙˆÙ… Ø´ÛŒ.</span>
              </li>
              <li>
                <span class="side-badge">Ù…Ø¹Ù…ÙˆÙ„ÛŒ</span>
                <span>Ø³Ø±Ø¹Øª Ù†Ø±Ù…Ø§Ù„Ø› Ù‡Ù… Ú†Ø§Ù„Ø´ØŒ Ù‡Ù… Ù„Ø°Øª Ø¨Ø§Ø²ÛŒ.</span>
              </li>
              <li>
                <span class="side-badge">Tip</span>
                <span>Ø¨Ø¹Ø¯Ø§Ù‹ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒÙ… ÛŒÚ© Ù…ÙˆØ¯ Â«ØªÙ…Ø±Ú©Ø²ÛŒ Ø´Ø¯ÛŒØ¯Â» Ù‡Ù… Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒÙ… ğŸ”’</span>
              </li>
            </ul>
          </div>
        </aside>
      </div>

      <!-- Bottom row -->
      <div class="bottom-row">
        <div class="bottom-left">
          <span>Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· Ø·Ø§ÙˆÛŒØªØ§ Ø¨Ø±Ø§ÛŒ Ø§Ù„Ù‡Ù‡ ğŸ’œ</span>
        </div>
        <div class="bottom-right">
          <a href="https://eitaa.com/tavita" target="_blank" class="link-btn">
            ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ú©Ø§Ù†Ø§Ù„ Ø·Ø§ÙˆÛŒØªØ§
          </a>
        </div>
      </div>
    </main>
  </div>

  <!-- ===== Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¨Ø§Ø²ÛŒ ===== -->
<script>
  // ==== Ø§Ù†ØªØ®Ø§Ø¨ Ø§Ù„Ù…Ø§Ù†â€ŒÙ‡Ø§ ====
  const canvas = document.getElementById("gameCanvas");
  const ctx = canvas.getContext("2d");

  const livesEl = document.getElementById("livesValue");
  const scoreEl = document.getElementById("scoreValue");
  const levelEl = document.getElementById("levelValue");
  const levelProgressInner = document.getElementById("levelProgressInner");

  const btnStart = document.getElementById("btnStart");
  const btnPause = document.getElementById("btnPause");
  const btnSound = document.getElementById("btnSound");
  const btnTheme = document.getElementById("btnTheme");
  const btnHelp = document.getElementById("btnHelp");
  const btnProfile = document.getElementById("btnProfile");

  const messageIcon = document.getElementById("messageIcon");
  const messageMain = document.getElementById("messageMain");
  const messageTag = document.getElementById("messageTag");

  const dailyDots = document.querySelectorAll(".daily-dot");

  const bodyEl = document.body;

  // ==== ÙˆØ¶Ø¹ÛŒØª Ø¨Ø§Ø²ÛŒ ====
  const MAX_LEVEL = 30;

  let lives = 3;
  let score = 0;
  let level = 1;

  let isRunning = false;
  let isPaused = false;
  let gameOver = false;
  let levelCleared = false;

  let soundOn = true;
  let isLightTheme = false;

  // Ø±Ú©ÙˆØ±Ø¯ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡
  let bestScore = 0;
  let bestLevel = 0;

  // ÙˆØ¶Ø¹ÛŒØª ØªÙˆÙ¾ Ùˆ Ù¾Ø¯
  const paddle = {
    width: 80,
    height: 12,
    x: canvas.width / 2 - 40,
    y: canvas.height - 30,
    speed: 7
  };

  const ball = {
    x: canvas.width / 2,
    y: canvas.height - 45,
    radius: 7,
    dx: 0,
    dy: 0,
    speed: 4
  };

  let bricks = [];
  let animationId = null;

  // ==== Ú©Ù…Ú©â€ŒÙ‡Ø§ ====

  function clamp(v, min, max) {
    return Math.max(min, Math.min(max, v));
  }

  // Ø³Ø§ÛŒØ² Ø¢Ø¬Ø±Ù‡Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù„ÙÙˆÙÙ„
  function getBrickScaleForLevel(level) {
    if (level <= 10) {
      // 3 -> 1
      const t = (level - 1) / 9;
      return 3 - 2 * t;
    } else if (level <= 20) {
      // 2 -> 1
      const t = (level - 11) / 9;
      return 2 - 1 * t;
    } else {
      // 1.5 -> 1
      const t = (level - 21) / 9;
      return 1.5 - 0.5 * t;
    }
  }

  // Ø³Ø§Ø®Øª Ø¢Ø±Ø§ÛŒÙ‡ Ø¢Ø¬Ø±Ù‡Ø§ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ù…Ø±Ø­Ù„Ù‡
  function buildBricksForLevel(level) {
    bricks = [];

    const scale = getBrickScaleForLevel(level);
    const s = clamp(scale, 1, 3);

    const baseWidth = 36;
    const baseHeight = 14;

    const brickWidth = baseWidth * s;
    const brickHeight = baseHeight * s * 0.85;
    const gap = 4;

    const maxCols = Math.max(
      3,
      Math.floor((canvas.width - 30) / (brickWidth + gap))
    );
    const cols = maxCols;

    // ØªØ¹Ø¯Ø§Ø¯ Ø±Ø¯ÛŒÙâ€ŒÙ‡Ø§ Ø±Ø§ Ù‡Ù… Ø¨Ù‡ scale Ø±Ø¨Ø· Ù…ÛŒâ€ŒØ¯ÛŒÙ…
    const rows = 4;

    const totalWidth = cols * brickWidth + (cols - 1) * gap;
    const offsetX = (canvas.width - totalWidth) / 2;
    const offsetY = 30;

    for (let r = 0; r < rows; r++) {
      for (let c = 0; c < cols; c++) {
        const x = offsetX + c * (brickWidth + gap);
        const y = offsetY + r * (brickHeight + gap);
        bricks.push({
          x,
          y,
          width: brickWidth,
          height: brickHeight,
          alive: true,
          color: getBrickColor(level, r)
        });
      }
    }
  }

  function getBrickColor(level, rowIndex) {
    // Ø±Ù†Ú¯ Ù†Ø³Ø¨ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø³Ø·Ø­
    const baseHue = 30 + level * 2; // Ø¨ÛŒÙ† Ù†Ø§Ø±Ù†Ø¬ÛŒ Ùˆ Ù‚Ø±Ù…Ø²
    const lightness = 40 + rowIndex * 7;
    return `hsl(${baseHue}, 85%, ${lightness}%)`;
  }

  // ==== Ø±Ù†Ø¯Ø± ====

  function clearCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    const grd = ctx.createRadialGradient(
      canvas.width / 2,
      0,
      0,
      canvas.width / 2,
      canvas.height / 2,
      canvas.height
    );
    grd.addColorStop(0, "#020617");
    grd.addColorStop(0.5, "#000000");
    grd.addColorStop(1, "#020617");
    ctx.fillStyle = grd;
    ctx.fillRect(0, 0, canvas.width, canvas.height);
  }

  function drawPaddle() {
    ctx.save();
    ctx.fillStyle = "#f97316";
    ctx.shadowColor = "rgba(249, 115, 22, 0.8)";
    ctx.shadowBlur = 16;
    ctx.beginPath();
    ctx.roundRect(paddle.x, paddle.y, paddle.width, paddle.height, 8);
    ctx.fill();
    ctx.restore();
  }

  function drawBall() {
    ctx.save();
    ctx.beginPath();
    ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
    ctx.closePath();
    ctx.fillStyle = "#e5e7eb";
    ctx.shadowColor = "rgba(248, 250, 252, 0.9)";
    ctx.shadowBlur = 14;
    ctx.fill();
    ctx.restore();
  }

  function drawBricks() {
    bricks.forEach((b) => {
      if (!b.alive) return;
      ctx.save();
      ctx.fillStyle = b.color;
      ctx.shadowColor = "rgba(249, 115, 22, 0.4)";
      ctx.shadowBlur = 10;
      ctx.beginPath();
      ctx.roundRect(b.x, b.y, b.width, b.height, 6);
      ctx.fill();
      ctx.restore();
    });
  }

  function render() {
    clearCanvas();
    drawBricks();
    drawPaddle();
    drawBall();
  }

  // ==== Ù…Ù†Ø·Ù‚ Ø¨Ø±Ø®ÙˆØ±Ø¯ ====

  function updateBallPosition() {
    ball.x += ball.dx;
    ball.y += ball.dy;

    // Ø¯ÛŒÙˆØ§Ø± Ú†Ù¾/Ø±Ø§Ø³Øª
    if (ball.x + ball.radius > canvas.width) {
      ball.x = canvas.width - ball.radius;
      ball.dx *= -1;
    } else if (ball.x - ball.radius < 0) {
      ball.x = ball.radius;
      ball.dx *= -1;
    }

    // Ø³Ù‚Ù
    if (ball.y - ball.radius < 0) {
      ball.y = ball.radius;
      ball.dy *= -1;
    }

    // Ø¨Ø±Ø®ÙˆØ±Ø¯ Ø¨Ø§ Ù¾Ø¯
    if (
      ball.y + ball.radius >= paddle.y &&
      ball.y + ball.radius <= paddle.y + paddle.height + 4 &&
      ball.x >= paddle.x &&
      ball.x <= paddle.x + paddle.width
    ) {
      ball.y = paddle.y - ball.radius;
      const hitPoint = (ball.x - (paddle.x + paddle.width / 2)) / (paddle.width / 2);
      const angle = hitPoint * (Math.PI / 3); // Ø­Ø¯Ø§Ú©Ø«Ø± 60 Ø¯Ø±Ø¬Ù‡
      const speed = ball.speed;
      ball.dx = speed * Math.sin(angle);
      ball.dy = -Math.abs(speed * Math.cos(angle));
    }

    // Ø¨Ø±Ø®ÙˆØ±Ø¯ Ø¨Ø§ Ø¢Ø¬Ø±Ù‡Ø§
    let bricksAlive = 0;
    bricks.forEach((b) => {
      if (!b.alive) return;
      bricksAlive++;

      if (
        ball.x + ball.radius > b.x &&
        ball.x - ball.radius < b.x + b.width &&
        ball.y + ball.radius > b.y &&
        ball.y - ball.radius < b.y + b.height
      ) {
        // Ø¨Ø±Ø®ÙˆØ±Ø¯
        b.alive = false;
        score += 10;
        updateHUD();
        // Ø¬Ù‡Øª
        ball.dy *= -1;
      }
    });

    if (bricksAlive === 0) {
      handleLevelCleared();
    }

    // Ø§ÙØªØ§Ø¯Ù† ØªÙˆÙ¾
    if (ball.y - ball.radius > canvas.height) {
      handleLifeLost();
    }
  }

  // ==== HUD / ÙˆØ¶Ø¹ÛŒØª Ø±ÙˆÛŒ ØµÙØ­Ù‡ ====

  function updateHUD() {
    livesEl.textContent = lives.toString();
    scoreEl.textContent = score.toString();
    levelEl.textContent = level.toString();

    const percent = ((level - 1) / (MAX_LEVEL - 1)) * 100;
    levelProgressInner.style.width = clamp(percent, 0, 100) + "%";

    // Ù†Ù‚Ø§Ø· ØªÙ…Ø±ÛŒÙ† Ø±ÙˆØ²Ø§Ù†Ù‡ â€“ Ù…Ø«Ù„Ø§ Ù‡Ø± Ûµ Ù…Ø±Ø­Ù„Ù‡ ÛŒÚ© Ù†Ù‚Ø·Ù‡
    const activeCount = clamp(Math.ceil(level / 5), 1, dailyDots.length);
    dailyDots.forEach((dot, idx) => {
      if (idx < activeCount) dot.classList.add("active");
      else dot.classList.remove("active");
    });

    saveBestRecord();
  }

  function setMessage(main, tag, icon = "ğŸ§ ") {
    messageMain.innerHTML = main;
    messageTag.innerHTML = tag || "";
    messageIcon.textContent = icon;
  }

  // ==== Ù…Ø¯ÛŒØ±ÛŒØª Ø¬Ø§Ù† Ùˆ Ø³Ø·Ø­ ====

  function handleLifeLost() {
    lives--;
    if (lives <= 0) {
      lives = 0;
      gameOver = true;
      isRunning = false;
      cancelAnimationFrame(animationId);
      setMessage(
        "Ø¨Ø§Ø²ÛŒ ØªÙ…ÙˆÙ… Ø´Ø¯ ğŸ’”",
        "Ø±ÙˆÛŒ â–¶ï¸ Ø¨Ø²Ù† ØªØ§ Ø§Ø² Ù…Ø±Ø­Ù„Ù‡ Û± Ø¨Ø§ Ø¬Ø§Ù† ØªØ§Ø²Ù‡ Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒÙ…. Ø³Ø¹ÛŒ Ú©Ù† Ø§ÛŒÙ† Ø¨Ø§Ø± Ø¢Ø¬Ø±Ù‡Ø§ Ø±Ùˆ Ø¨ÛŒØ´ØªØ± Ø¨Ø´Ú©Ù†ÛŒ.",
        "ğŸ’”"
      );
      updateHUD();
      return;
    }

    setMessage(
      "ØªÙˆÙ¾ Ø§ÙØªØ§Ø¯ Ù¾Ø§ÛŒÛŒÙ† ğŸ˜…",
      "ÛŒÚ© Ø¬ÙˆÙ† Ø§Ø² Ø¯Ø³Øª Ø¯Ø§Ø¯ÛŒØŒ ÙˆÙ„ÛŒ Ù‡Ù†ÙˆØ² Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ø§Ø¯Ø§Ù…Ù‡ Ø¨Ø¯ÛŒ. Ø­ÙˆØ§Ø³Øª Ø¨Ù‡ Ø²Ø§ÙˆÛŒÙ‡ Ø¨Ø±Ø®ÙˆØ±Ø¯ Ø¨Ø§ Ù¾Ø¯ Ø¨Ø§Ø´Ù‡.",
      "âš ï¸"
    );
    resetBallAndPaddle(false);
    updateHUD();
  }

  function handleLevelCleared() {
    if (levelCleared) return;
    levelCleared = true;
    isRunning = false;
    cancelAnimationFrame(animationId);

    // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Û² Ø¬Ø§Ù†
    lives += 2;

    setMessage(
      `Ù…Ø±Ø­Ù„Ù‡ ${level} Ø±Ùˆ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø±Ø¯ Ú©Ø±Ø¯ÛŒ ğŸ‰`,
      "Ø¯Ùˆ ØªØ§ Ø¬ÙˆÙ† Ø¬Ø§ÛŒØ²Ù‡ Ú¯Ø±ÙØªÛŒ! Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø¨Ø±ÛŒÙ… Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯ÛŒØŸ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø±ÙˆÛŒ â–¶ï¸ Ø¨Ø²Ù†.",
      "ğŸ…"
    );

    updateHUD();

    if (level >= MAX_LEVEL) {
      gameOver = true;
      setMessage(
        "ØªØ¨Ø±ÛŒÚ©! Ø¨Ù‡ Ø§Ù†ØªÙ‡Ø§ÛŒ Ù…Ø³ÛŒØ± Ø¨Ø¯Ø´Ú©Ù† Ø±Ø³ÛŒØ¯ÛŒ ğŸ˜",
        "Ø§ÛŒÙ†â€ŒØ¬Ø§ Ø¢Ø®Ø± Ø®Ø·Ù‡Ø› Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ø§Ø² Ø§ÙˆÙ„ Ø¨Ø§ Ø§Ù…ØªÛŒØ§Ø² Ø¬Ø¯ÛŒØ¯ Ø±Ú©ÙˆØ±Ø¯ Ø¨Ø²Ù†ÛŒ.",
        "ğŸ†"
      );
    } else {
      level++;
    }
  }

  function resetBallAndPaddle(resetPositionOnly = true) {
    paddle.x = canvas.width / 2 - paddle.width / 2;
    paddle.y = canvas.height - 30;

    ball.x = canvas.width / 2;
    ball.y = canvas.height - 45;

    const speedBase = 3 + level * 0.15; // Ú©Ù…ÛŒ Ø³Ø±ÛŒØ¹â€ŒØªØ± Ø¨Ø§ Ø§ÙØ²Ø§ÛŒØ´ Ù…Ø±Ø­Ù„Ù‡
    ball.speed = speedBase;
    ball.dx = speedBase * (Math.random() > 0.5 ? 1 : -1) * 0.6;
    ball.dy = -Math.abs(speedBase * 0.9);
  }

  function resetLevel() {
    buildBricksForLevel(level);
    resetBallAndPaddle(true);
    levelCleared = false;
    gameOver = false;
    updateHUD();
  }

  function resetGame() {
    lives = 3;
    score = 0;
    level = 1;
    gameOver = false;
    levelCleared = false;
    resetLevel();
    setMessage(
      "Ø¨Ø§Ø²ÛŒ Ø§Ø² Ø§ÙˆÙ„ Ø´Ø±ÙˆØ¹ Ø´Ø¯ ğŸŒ±",
      "Ø§Ø² Ù…Ø±Ø­Ù„Ù‡ Û± Ø´Ø±ÙˆØ¹ Ú©Ø±Ø¯ÛŒ. Ù‡Ø± Ù…Ø±Ø­Ù„Ù‡ Ø±Ùˆ Ø±Ø¯ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØŒ Û² Ø¬ÙˆÙ† Ø¨Ù‡Øª Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´Ù‡.",
      "ğŸ§¡"
    );
  }

  // ==== Ø­Ù„Ù‚Ù‡ Ø§ØµÙ„ÛŒ Ø¨Ø§Ø²ÛŒ ====

  function gameLoop() {
    if (!isRunning || isPaused) {
      return;
    }

    updateBallPosition();
    render();

    animationId = requestAnimationFrame(gameLoop);
  }

  function startOrResumeGame() {
    if (gameOver) {
      // Ø§Ø² Ø§ÙˆÙ„
      resetGame();
    }

    if (levelCleared && level <= MAX_LEVEL) {
      resetLevel();
    }

    if (!isRunning) {
      isRunning = true;
      isPaused = false;
      setMessage(
        `Ù…Ø±Ø­Ù„Ù‡ ${level} Ø´Ø±ÙˆØ¹ Ø´Ø¯ ğŸš€`,
        "Ø¨Ø§ Ø¯Ù‚Øª Ø¨Ù‡ Ø¢Ø¬Ø±Ù‡Ø§ Ù†Ú¯Ø§Ù‡ Ú©Ù†Ø› Ù‡Ø± Ú†ÛŒ Ø±ÛŒØ²ØªØ± Ù…ÛŒâ€ŒØ´Ù†ØŒ ØªÙ…Ø±Ú©Ø²Øª Ø¨Ø§ÛŒØ¯ Ø¨ÛŒØ´ØªØ± Ø¨Ø´Ù‡.",
        "ğŸš€"
      );
      render();
      gameLoop();
    }
  }

  function togglePause() {
    if (!isRunning || gameOver) {
      return;
    }
    isPaused = !isPaused;
    if (isPaused) {
      cancelAnimationFrame(animationId);
      setMessage(
        "Ø¨Ø§Ø²ÛŒ Ù…ØªÙˆÙ‚Ù Ø´Ø¯ â¸ï¸",
        "Ø¨Ø±Ø§ÛŒ Ø§Ø¯Ø§Ù…Ù‡ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø±ÙˆÛŒ â¸ï¸ Ø¨Ø²Ù† ØªØ§ Ø§Ø¯Ø§Ù…Ù‡ Ø¨Ø¯ÛŒÙ….",
        "â¸ï¸"
      );
    } else {
      setMessage(
        "Ø§Ø¯Ø§Ù…Ù‡ Ø¨Ø§Ø²ÛŒ â–¶ï¸",
        "Ø­Ø§Ù„Ø§ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ…Ø±Ú©Ø² Ú©Ù†Ø› ØªÙˆÙ¾ Ø±Ùˆ Ø§Ø² Ø¯Ø³Øª Ù†Ø¯Ù‡.",
        "â–¶ï¸"
      );
      gameLoop();
    }
  }

  // ==== ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§ (Ù…ÙˆØ³ / Ù„Ù…Ø³) ====

  function movePaddleTo(clientX) {
    const rect = canvas.getBoundingClientRect();
    const x = clientX - rect.left;
    paddle.x = clamp(x - paddle.width / 2, 0, canvas.width - paddle.width);
  }

  canvas.addEventListener("mousemove", (e) => {
    movePaddleTo(e.clientX);
  });

  canvas.addEventListener("touchmove", (e) => {
    if (e.touches.length > 0) {
      movePaddleTo(e.touches[0].clientX);
    }
  }, { passive: true });

  // Ø­Ø±Ú©Øª Ø¨Ø§ Ø¬Ù‡Øª Ú†Ù¾ Ùˆ Ø±Ø§Ø³Øª
  window.addEventListener("keydown", (e) => {
    const key = e.key;
    if (key === "ArrowLeft") {
      paddle.x = clamp(paddle.x - paddle.speed, 0, canvas.width - paddle.width);
    } else if (key === "ArrowRight") {
      paddle.x = clamp(paddle.x + paddle.speed, 0, canvas.width - paddle.width);
    } else if (key === " ") {
      // Ø§Ø³Ù¾ÛŒØ³ = Ø´Ø±ÙˆØ¹/Ø§Ø¯Ø§Ù…Ù‡
      e.preventDefault();
      startOrResumeGame();
    }
  });

  // ==== Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ ====

  btnStart.addEventListener("click", () => {
    startOrResumeGame();
  });

  btnPause.addEventListener("click", () => {
    togglePause();
  });

  btnSound.addEventListener("click", () => {
    soundOn = !soundOn;
    if (soundOn) {
      btnSound.classList.remove("muted");
      btnSound.textContent = "ğŸ”Š";
      setMessage("ØµØ¯Ø§ Ø±ÙˆØ´Ù† Ø´Ø¯ ğŸ”Š", "ÙØ¹Ù„Ø§Ù‹ Ø§ÙÚ©Øª ØµÙˆØªÛŒ Ø³Ø§Ø¯Ù‡ Ø§Ø³ØªØ› Ø¨Ø¹Ø¯Ø§Ù‹ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒÙ… ØµØ¯Ø§ÛŒ Ø¬Ø°Ø§Ø¨ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒÙ….", "ğŸ”Š");
    } else {
      btnSound.classList.add("muted");
      btnSound.textContent = "ğŸ”‡";
      setMessage("ØµØ¯Ø§ Ù‚Ø·Ø¹ Ø´Ø¯ ğŸ”‡", "Ù‡Ø± ÙˆÙ‚Øª Ø®ÙˆØ§Ø³ØªÛŒØŒ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø±ÙˆÛŒ Ø¢ÛŒÚ©ÙˆÙ† ØµØ¯Ø§ Ø¨Ø²Ù†.", "ğŸ”‡");
    }
  });

  btnTheme.addEventListener("click", () => {
    isLightTheme = !isLightTheme;
    if (isLightTheme) {
      bodyEl.classList.add("light");
      btnTheme.classList.add("day");
      btnTheme.textContent = "â˜€ï¸";
      setMessage(
        "Ø­Ø§Ù„Øª Ø±ÙˆØ² ÙØ¹Ø§Ù„ Ø´Ø¯ â˜€ï¸",
        "Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ Ø±ÙˆØ´Ù† Ø´Ø¯Ø› Ø§Ú¯Ø± Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ ØªÙ…Ø±Ú©Ø² Ø´Ø¨Ø§Ù†Ù‡ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØŒ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø±ÙˆÛŒ Ø¢ÛŒÚ©ÙˆÙ† Ø¨Ø²Ù†.",
        "â˜€ï¸"
      );
    } else {
      bodyEl.classList.remove("light");
      btnTheme.classList.remove("day");
      btnTheme.textContent = "ğŸŒ™";
      setMessage(
        "Ø­Ø§Ù„Øª Ø´Ø¨ ÙØ¹Ø§Ù„ Ø´Ø¯ ğŸŒ™",
        "Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø²ÛŒ Ø¯Ø± ØªØ§Ø±ÛŒÚ©ÛŒ Ùˆ ØªÙ…Ø±Ú©Ø² Ø¨ÛŒØ´ØªØ±ØŒ Ø­Ø§Ù„Øª Ø´Ø¨ Ø¨Ù‡ØªØ±Ù‡.",
        "ğŸŒ™"
      );
    }
  });

  btnHelp.addEventListener("click", () => {
    setMessage(
      "Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø³Ø±ÛŒØ¹ Ø¨Ø¯Ø´Ú©Ù† ğŸ¯",
      "ØªÙˆÙ¾ Ø±Ùˆ Ø¨Ø§ Ù¾Ø¯ Ù¾Ø§ÛŒÛŒÙ† ØµÙØ­Ù‡ Ù†Ú¯Ù‡ Ø¯Ø§Ø± Ùˆ Ø³Ø¹ÛŒ Ú©Ù† Ù‡Ù…Ù‡ Ø¢Ø¬Ø±Ù‡Ø§ Ø±Ùˆ Ø¨Ø´Ú©Ù†ÛŒ. Ù‡Ø± Ù…Ø±Ø­Ù„Ù‡ Ú©Ù‡ Ø±Ø¯ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØŒ Û² Ø¬Ø§Ù† Ø¬Ø§ÛŒØ²Ù‡ Ù…ÛŒâ€ŒÚ¯ÛŒØ±ÛŒ. Ù…Ø±Ø§Ø­Ù„ Û± ØªØ§ Û±Û° Ø¢Ø¬Ø±Ù‡Ø§ÛŒ Ø¯Ø±Ø´Øª Ø¯Ø§Ø±Ù†ØŒ Û±Û± ØªØ§ Û²Û° Ú©Ù…ÛŒ Ø±ÛŒØ²ØªØ±ØŒ Ùˆ Û²Û± ØªØ§ Û³Û° Ø±ÛŒØ²ØªØ±ÛŒÙ† Ø­Ø§Ù„Øª. ÙˆÙ‚ØªÛŒ Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ§ÛŒØŒ Ø±ÙˆÛŒ â–¶ï¸ Ø¨Ø²Ù†.",
      "â“"
    );
  });

  function loadBestRecord() {
    try {
      const raw = localStorage.getItem("badshkanRecord");
      if (!raw) return;
      const rec = JSON.parse(raw);
      bestScore = rec.bestScore || 0;
      bestLevel = rec.bestLevel || 0;
    } catch (e) {
      bestScore = 0;
      bestLevel = 0;
    }
  }

  function saveBestRecord() {
    if (score > bestScore) bestScore = score;
    if (level > bestLevel) bestLevel = level;
    try {
      localStorage.setItem(
        "badshkanRecord",
        JSON.stringify({ bestScore, bestLevel })
      );
    } catch (e) {}
  }

  btnProfile.addEventListener("click", () => {
    loadBestRecord();
    setMessage(
      "Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ùˆ Ø±Ú©ÙˆØ±Ø¯ ØªÙˆ ğŸ“Š",
      `Ø¨ÛŒØ´ØªØ±ÛŒÙ† Ø§Ù…ØªÛŒØ§Ø²Øª ØªØ§ Ø­Ø§Ù„Ø§: <b>${bestScore}</b> â€“ Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ† Ù…Ø±Ø­Ù„Ù‡â€ŒØ§ÛŒ Ú©Ù‡ Ø±Ø³ÛŒØ¯ÛŒ: <b>${bestLevel}</b>. Ù‡Ø± ÙˆÙ‚Øª Ø®ÙˆØ§Ø³ØªÛŒØŒ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ø¨Ø§Ø²ÛŒ Ø±Ùˆ Ø§Ø² Ø§ÙˆÙ„ Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒ Ùˆ Ø±Ú©ÙˆØ±Ø¯ Ø¬Ø¯ÛŒØ¯ Ø¨Ø²Ù†ÛŒ.`,
      "ğŸ‘¤"
    );
  });

  // ==== Ø´Ø±ÙˆØ¹ Ø§ÙˆÙ„ÛŒÙ‡ ====
  function init() {
    loadBestRecord();
    resetLevel();
    updateHUD();
    render();
    setMessage(
      "Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ Ø±ÙˆÛŒ â–¶ï¸ Ø¨Ø²Ù† ğŸ’œ",
      "Ø¯Ø± Ù…Ø±Ø§Ø­Ù„ Û± ØªØ§ Û±Û°ØŒ Ø¢Ø¬Ø±Ù‡Ø§ Ø§Ø² Ø§Ù†Ø¯Ø§Ø²Ù‡ Û³ Ø¨Ù‡ Û± Ú©Ù… Ù…ÛŒâ€ŒØ´Ù†Ø› Ø¨Ø¹Ø¯ÛŒâ€ŒÙ‡Ø§ Ø±ÛŒØ²ØªØ± Ùˆ Ø´Ù„ÙˆØºâ€ŒØªØ±Ù†ØŒ Ø§Ù…Ø§ ØªÙˆ Ù‚ÙˆÛŒâ€ŒØªØ± Ù…ÛŒâ€ŒØ´ÛŒ.",
      "ğŸ§ "
    );
  }

  init();
</script>
</body>
</html>
